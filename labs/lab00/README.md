[ВЕРНУТЬСЯ К СПИСКУ ЛАБОРАТОРНЫХ РАБОТ](https://github.com/Art1shock/otus-networks/tree/main/labs)

[ПОСМОТРЕТЬ СХЕМУ СЕТИ](https://github.com/Art1shock/otus-networks/blob/main/labs/lab00/%D0%A1%D1%85%D0%B5%D0%BC%D0%B0_%D1%81%D0%B5%D1%82%D0%B8.png)

# ДЗ БАЗОВАЯ НАСТРОЙКА КОММУТАТОРА.

## Часть 1. Создание сети и проверка настроек коммутатора по умолчанию.

### Шаг 1. Создайте сеть согласно топологии.

**a. Подсоедините консольный кабель, как показано в топологии. На данном этапе не подключайте кабель Ethernet компьютера PC-A:**

Вначале строю сеть согласно топологии, при этом подсоединяя консольный кабель к коммутатору:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_1.png)

**b. Установите консольное подключение к коммутатору с компьютера PC-A с помощью Tera Term или другой программы эмуляции терминала:**

Затем устанавливаю консольное соединение с коммутатором через компьютер:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_2.png)

**Почему нужно использовать консольное подключение для первоначальной настройки коммутатора? Почему нельзя подключиться к коммутатору через Telnet или SSH?**

Не получится подключиться сразу через Telnet или SSH, так как необходимо настроить ip адрес для подключения, а это
можно сделать впервые только через консольный провод.

### Шаг 2. Проверьте настройки коммутатора по умолчанию.

**a. Предположим, что коммутатор не имеет файла конфигурации, сохраненного в энергонезависимой памяти (NVRAM). Консольное подключение к коммутатору с помощью Tera Term или другой программы эмуляции терминала предоставит доступ к командной строке пользовательского режима EXEC в виде Switch>. Введите команду enable, чтобы войти в привилегированный режим EXEC. Обратите внимание, что измененная в конфигурации строка будет отражать привилегированный режим EXEC. Убедитесь, что на коммутаторе находится пустой файл конфигурации по умолчанию, с помощью команды show running-config привилегированного режима EXEC. Если конфигурационный файл был предварительно сохранен, его нужно удалить. В зависимости от модели коммутатора и версии IOS ваша конфигурация может слегка отличаться. Тем не менее, настроенных паролей или IP-адресов в конфигурации быть не должно. Выполните очистку настроек и перезагрузите коммутатор, если ваш коммутатор имеет настройки, отличные от настроек по умолчанию.**


Проверяю настройки коммутатора по умолчанию. Для этого нужно зайти в привилегированный режим с помощью команды enable, после чего
введя команду **show running-config** могу посмотреть текущий файл конфигурации:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_3.png)

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_4.png)

**b. Изучите текущий файл running configuration.**

Как видно со скриншотов выше, никаких паролей не задано и вообще ничего пока не изменялось. 

**Сколько интерфейсов FastEthernet имеется на коммутаторе 2960? Сколько интерфейсов Gigabit Ethernet имеется на коммутаторе 2960? Каков диапазон значений, отображаемых в vty-линиях?**

Также видно, что коммутатор (в данном случае коммутатор 2960)
имеет 24 интерфейса FastEthernet и 2 интерфейса GigabitEthernet. Диапазон значений в vty-линиях (виртуальные терминальные линии) равен 0 15, то есть всего 16 линий.

**c. Изучите файл загрузочной конфигурации (startup configuration), который содержится в энергонезависимом ОЗУ (NVRAM).**

Далее я хочу посмотреть файл загрузочной конфигурации (startup configuration), но появляется следующее сообщение:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_5.png)

**Почему появляется это сообщение?**

Это сообщение означает, что такого файла конфигурации нет, так как текущий конфиг не был сохранен в файле загрузочной конфигурации. Для того чтобы сохранить текущий файл конфигурации в загрузочный, нужно прописать команду **copy running-config startup-config**:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_6.png)

Теперь после этой команды можно снова прописать **show startup-config** и команда отработает нормально (видно на скрине выше).

**d. Изучите характеристики SVI для VLAN 1.
Назначен ли IP-адрес сети VLAN 1? Данный интерфейс включен?**

Зайдем в файл текущей конфигурации с помощью команды **show run**, предварительно зайдя в привелегированный режим.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_7.png)

Как видно со скриншота выше интерфейс VLAN 1 не имеет IP-адреса (no ip address) и он выключен (shutdown).

**Какой MAC-адрес имеет SVI? Возможны различные варианты ответов.**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_9.png)

Здесь видно, что интерфейс SVI (или VLAN) имеет следующий MAC-адрес: 0001.9764.a345 Узнать MAC-адрес можно с помощью команды **show interfaces vlan1**

**e. Изучите IP-свойства интерфейса SVI сети VLAN 1.
Какие выходные данные вы видите?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_21.png)

Здесь видно, что интерфейс SVI не поднят, IP-адрес не назначен. Этот интерфейс административно отключен.

**f. Подсоедините кабель Ethernet компьютера PC-A к порту 6 на коммутаторе и изучите IP-свойства интерфейса SVI сети VLAN 1. Дождитесь согласования параметров скорости и дуплекса между коммутатором и ПК.**
**Какие выходные данные вы видите?**

Подключаю кабель Ethernet от компьютера к 6 порту на коммутаторе:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_10.png)

Наведя курсором на кабель Ethernet (черная линия) можно увидеть к какому порту подключен кабель к коммутатору и компьютеру.

**g. Изучите сведения о версии ОС Cisco IOS на коммутаторе.**
**Под управлением какой версии ОС Cisco IOS работает коммутатор?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_11.png)

Выше показана версия ОС Cisco IOS - 15.0(2)SE4

**Как называется файл образа системы?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_13.png)

Со скриншота видно, что файл образа системы имеет следующее название: 2960-lanbasek9-mz.150-2.SE4.bin

**Какой базовый MAC-адрес назначен коммутатору?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_12.png)

Базовый MAC-адрес коммутатора в данном случае будет следующий: 00:17:59:A7:51:80

**h. Изучите свойства по умолчанию интерфейса FastEthernet, который используется компьютером PC-A.**

Свойтсва интерфейса FastEthernet 0/6 можно увидеть c помощью команды **show interfaces fastEthernet 0/6**. 0/6, так как провод подключен к 6 порту коммутатора. 

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_14.png)

**Интерфейс включен или выключен?**

Посмотрев на скрин выше видно, что интерфейс FastEthernet 0/6 включен, так как было совершено подключение к этому порту через кабель ethernet.

**Что нужно сделать, чтобы включить интерфейс?**

Но если интерфейс выключен, то его можно включить с помощью команды **no shutdown**. Для этого надо сначала зайти в настройки интерфейса через режим глобальной конфигурации с помощью команды **conf t**. Оттуда уже можно зайти в настройки нужного интерфейса, например, **interface fastEthernet 0/6**. Естественно все настройки делаются предварительно зайдя в привелегированный режим.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_15.png)

**Какой MAC-адрес у интерфейса?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_16.png)

MAC-адрес интерфейса fastEthernet 0/6: 000a.f356.1706

**Какие настройки скорости и дуплекса заданы в интерфейсе?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_27.png)

Скорость равна 100 Мбит/с. Полный дуплекс.

**i. Изучите параметры сети VLAN по умолчанию на коммутаторе.**
**Какое имя присвоено сети VLAN 1 по умолчанию?**
**Какие порты расположены в сети VLAN 1?**
**Активна ли сеть VLAN 1?**

С помощью команды **show vlan brief** можно посмотреть необходимые параметры:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_17.png)

Имя сети VLAN 1: default. Порты в сети VLAN 1: все порты fastEthernet и все порты gigabitEthernet

**К какому типу сетей VLAN принадлежит VLAN по умолчанию?**

VLAN относится к локальной сети.

**j. Изучите флеш-память.
Выполните одну из следующих команд, чтобы изучить содержимое флеш-каталога.
Switch# show flash 
Switch# dir flash: 
В конце имени файла указано расширение, например .bin. Каталоги не имеют расширения файла.
Какое имя присвоено образу Cisco IOS?**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_18.png)

Имя образа: 2960-lanbasek9-mz.150-2.SE4

## Часть 2. Настройка базовых параметров сетевых устройств

Во второй части необходимо будет настроить основные параметры коммутатора и компьютера.

### Шаг 1. Настройте базовые параметры коммутатора.

**a. В режиме глобальной конфигурации скопируйте следующие базовые параметры конфигурации и вставьте их в файл на коммутаторе S1. 
no ip domain-lookup
hostname S1
service password-encryption
enable secret class
banner motd #
Unauthorized access is strictly prohibited. #**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_19.png)

**b. Назначьте IP-адрес интерфейсу SVI на коммутаторе. Благодаря этому вы получите возможность удаленного управления коммутатором.
Прежде чем вы сможете управлять коммутатором S1 удаленно с компьютера PC-A, коммутатору нужно назначить IP-адрес. Согласно конфигурации по умолчанию коммутатором можно управлять через VLAN 1. Однако в базовой конфигурации коммутатора не рекомендуется назначать VLAN 1 в качестве административной VLAN.**

Назначаю IP-адрес и маску с помощью следующих команд:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_22.png)

**c. Доступ через порт консоли также следует ограничить с помощью пароля. Используйте cisco в качестве пароля для входа в консоль в этом задании. Конфигурация по умолчанию разрешает все консольные подключения без пароля. Чтобы консольные сообщения не прерывали выполнение команд, используйте параметр logging synchronous.
S1(config)# line con 0
S1(config-line)# logging synchronous**

Зайдя в настройки порта консоли ставлю пароль cisco:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_23.png)

**d. Настройте каналы виртуального соединения для удаленного управления (vty), чтобы коммутатор разрешил доступ через Telnet. Если не настроить пароль VTY, будет невозможно подключиться к коммутатору по протоколу Telnet.
Для чего нужна команда login?**

Ставлю пароль **cisco** для всех виртуальных линий (от 0 до 15):

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_24.png)

Команда **login** нужна чтобы при входе, например, в пользовательский режим, пароль запрашивался, иначе пароль можно задать, но он запрашиваться не будет.

### Шаг 2. Настройте IP-адрес на компьютере PC-A.

**Назначьте компьютеру IP-адрес и маску подсети в соответствии с таблицей адресации.**

**1) Перейдите в Панель управления. (Control Panel)**

**2) В представлении «Категория» выберите « Просмотр состояния сети и задач».**

**3) Щелкните Изменение параметров адаптера на левой панели.**

**4) Щелкните правой кнопкой мыши интерфейс Ethernet и выберите «Свойства» .**

**5) Выберите Протокол Интернета версии 4 (TCP/IPv4) > Свойства.**

**6) Выберите Использовать следующий IP-адрес и введите IP-адрес и маску подсети  и нажмите ОК.**

Назначаю IP-адрес компьютеру:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_25.png)

## Часть 3. Проверка сетевых подключений

В третьей части лабораторной работы вам предстоит проверить и задокументировать конфигурацию коммутатора, протестировать сквозное соединение между компьютером PC-A и коммутатором S1, а также протестировать возможность удаленного управления коммутатором.

### Шаг 1. Отобразите конфигурацию коммутатора.

Используйте консольное подключение на компьютере PC-A для отображения и проверки конфигурации коммутатора. Команда show run позволяет постранично отобразить всю текущую конфигурацию. Для пролистывания используйте клавишу пробела.

Конфигурацию я скинул в [отдельный файл](https://github.com/Art1shock/otus-networks/blob/main/labs/lab00/%D0%98%D1%82%D0%BE%D0%B3%D0%BE%D0%B2%D1%8B%D0%B9%20%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3) в папке этого ДЗ.

**b. Проверьте параметры VLAN 1.
S1# show interface vlan 1**
**Какова полоса пропускания этого интерфейса?**
**В каком состоянии находится VLAN 1?**
**В каком состоянии находится канальный протокол?**

Предварительно подняв VLAN 1 с помощью команды **no shutdown** можно увидеть, что он поднят. Также можно увидеть, что канальный протокол также поднят.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_26.png)

Полоса пропускания: 100 Мбит/с (BW 100000 Kbit).

### Шаг 2. Протестируйте сквозное соединение, отправив эхо-запрос.

**a. В командной строке компьютера PC-A с помощью утилиты ping проверьте связь сначала с адресом PC-A.**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_28.png)

Со скриншота видно, что пинг прошел успешно, 4 из 4 пакетов дошли успешно без потерь.

**b. Из командной строки компьютера PC-A отправьте эхо-запрос на административный адрес интерфейса SVI коммутатора S1.**
**Поскольку компьютеру PC-A нужно преобразовать МАС-адрес коммутатора S1 с помощью ARP, время ожидания передачи первого пакета может истечь. Если эхо-запрос не удается, найдите и устраните неполадки базовых настроек устройства. Проверьте как физические кабели, так и логическую адресацию.**

Теперь пингую интерфейс SVI коммутатора:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_29.png)
Как видно пинг прошел успешно.

### Шаг 3. Проверьте удаленное управление коммутатором S1.
**После этого используйте удаленный доступ к устройству с помощью Telnet. В этой лабораторной работе устройства PC-A и S1 расположены рядом. В производственной сети коммутатор может находиться в коммутационном шкафу на последнем этаже, в то время как административный компьютер находится на первом этаже. На данном этапе вам предстоит использовать Telnet для удаленного доступа к коммутатору S1 через его административный адрес SVI. Telnet — это не безопасный протокол, но вы можете использовать его для проверки удаленного доступа. В случае с Telnet вся информация, включая пароли и команды, отправляется через сеанс в незашифрованном виде. В последующих лабораторных работах вы будете использовать протокол SSH для удаленного доступа к сетевым устройствам.**

**a. Откройте Tera Term или другую программу эмуляции терминала с возможностью Telnet. 
b. Выберите сервер Telnet и укажите адрес управления SVI для подключения к S1.  Пароль: cisco.
c. После ввода пароля cisco вы окажетесь в командной строке пользовательского режима. Для перехода в исполнительский режим EXEC введите команду enable и используйте секретный пароль class.
d. Сохраните конфигурацию.
e. Чтобы завершить сеанс Telnet, введите exit.**

Перед подключением через telnet мы должны определить по какому транспортному протоколу будет осуществляться подключение к терминальными линиям. Для этого в настройках терминальных линий введем команду **transport input telnet**:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_30.png)

Теперь виртуальные линии настроены для подключения через telnet. IP-адрес также был прописан, так что теперь можно удаленно подключится через telnet. Для этого нужно ввести команду **telnet 192.168.1.2**. Указыается IP-адрес SVI.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_31.png)

Как видно подключение произошло успешно. Был запрошен пароль для входа, значит все настроено правильно.

Сохраняем текущую конфигурацию и завершаем сеанс telnet:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_32.png)

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_1/Screenshot_33.png)
