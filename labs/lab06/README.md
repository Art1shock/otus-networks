- [ВЕРНУТЬСЯ К СПИСКУ ЛАБОРАТОРНЫХ РАБОТ](https://github.com/Art1shock/otus-networks/tree/main/labs)  
- [ПОСМОТРЕТЬ СХЕМУ СЕТИ](https://github.com/Art1shock/otus-networks/blob/main/labs/lab06/%D0%A1%D1%85%D0%B5%D0%BC%D0%B0_%D1%81%D0%B5%D1%82%D0%B8.md)  
- [ПОСМОТРЕТЬ КОНФИГ КОММУТАТОРА S1](https://github.com/Art1shock/otus-networks/blob/main/labs/lab06/config%20S1.md)  
- [ПОСМОТРЕТЬ КОНФИГ КОММУТАТОРА S2](https://github.com/Art1shock/otus-networks/blob/main/labs/lab06/config%20S2.md)  
- [ПОСМОТРЕТЬ КОНФИГ КОММУТАТОРА S3](https://github.com/Art1shock/otus-networks/blob/main/labs/lab06/config%20S3.md)

# Лабораторная работа. Развертывание коммутируемой сети с резервными каналами.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_6.png)

## Часть 1:	Создание сети и настройка основных параметров устройства
#### В части 1 вам предстоит настроить топологию сети и основные параметры маршрутизаторов.
### Шаг 1:	Создайте сеть согласно топологии.
#### Подключите устройства, как показано в топологии, и подсоедините необходимые кабели.
### Шаг 2:	Выполните инициализацию и перезагрузку коммутаторов.
### Шаг 3:	Настройте базовые параметры каждого коммутатора.
**a.	Отключите поиск DNS.  
b.	Присвойте имена устройствам в соответствии с топологией.  

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_1.png)

c.	Назначьте class в качестве зашифрованного пароля доступа к привилегированному режиму.  
d.	Назначьте cisco в качестве паролей консоли и VTY и активируйте вход для консоли и VTY каналов.  

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_2.png)

e.	Настройте logging synchronous для консольного канала.  
f.	Настройте баннерное сообщение дня (MOTD) для предупреждения пользователей о запрете несанкционированного доступа.  
g.	Задайте IP-адрес, указанный в таблице адресации для VLAN 1 на всех коммутаторах.  
h.	Скопируйте текущую конфигурацию в файл загрузочной конфигурации.**

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_3.png)

### Шаг 4:	Проверьте связь.
#### Проверьте способность компьютеров обмениваться эхо-запросами.
#### Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S2?
#### Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S3?
#### Успешно ли выполняется эхо-запрос от коммутатора S2 на коммутатор S3?
#### Выполняйте отладку до тех пор, пока ответы на все вопросы не будут положительными.

Все эхо-запросы прошли успешно.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_4.png)

## Часть 2:	Определение корневого моста
### Шаг 1:	Отключите все порты на коммутаторах.

Все порты отключены:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_5.png)

### Шаг 2:	Настройте подключенные порты в качестве транковых.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_7.png)

### Шаг 3:	Включите порты F0/2 и F0/4 на всех коммутаторах.

Нужные порты включены:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_8.png)

### Шаг 4:	Отобразите данные протокола spanning-tree.

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_9.1.png)

#### В схему ниже запишите роль и состояние (Sts) активных портов на каждом коммутаторе в топологии:

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_10.2.png)

#### С учетом выходных данных, поступающих с коммутаторов, ответьте на следующие вопросы.
#### Какой коммутатор является корневым мостом? 

Коммутатор S2.

#### Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста?

Исходя из идентификатора BID, в который входит два поля: приоритет и MAC-адрес. Но так как значение приоритета у всех коммутаторов по умолчанию 32 768, то выбирается корневой мост с самым низким значением MAC-адреса (в данном случае это коммутатор S2).

#### Какие порты на коммутаторе являются корневыми портами?

Корневые порты есть на коммутаторах S1 (Fa0/1) и S3 (Fa0/2).

#### Какие порты на коммутаторе являются назначенными портами?

На S2 все порты являются назначенными.

#### Какой порт отображается в качестве альтернативного и в настоящее время заблокирован?

Исходя из скриншота с выводом команды **show spanning-tree** альтернативный порт находится на коммутаторе S1 (Fa0/4).

#### Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта?

Альтернативным порт становится если другая сторона не является корневым портом, иначе получится, что путь до корневого моста будет заблокирован. В схеме выше где вписывались роли и состояния портов можно легко заметить, что напротив корневых портов (Root) находятся назначенные порты (Desg). В остальных случаях напротив назначенных портов стоят альтернативные порты (Altn) и причем они заблокированы (BLK), чтобы избежать петли.

Если напротив корневых портов находятся назначенные порты, то с назначенными и альтернативными портами не все так однозначно. Назначенным портом будет порт на том коммутаторе, чей BID будет иметь самое низкое значение (при условии, что приоритет одинаковый, выбирается самый низкий по значению MAC-адрес) или можно сказать так - альтернативным портом будет порт с самым высоким BID.

## Часть 3:	Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
### Шаг 1:	Определите коммутатор с заблокированным портом

![](https://github.com/Art1shock/images/blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%97_7/Screenshot_9.1.png)

Коммутатор с заблокированным портом будет S1.

### Шаг 2:	Измените стоимость порта.
**Помимо заблокированного порта, единственным активным портом на этом коммутаторе является порт, выделенный в качестве порта корневого моста. Уменьшите стоимость этого порта корневого моста до 18, выполнив команду spanning-tree cost 18 режима конфигурации интерфейса.**



[ВЕРНУТЬСЯ НАВЕРХ СТРАНИЦЫ](https://github.com/Art1shock/otus-networks/tree/main/labs/lab06)
